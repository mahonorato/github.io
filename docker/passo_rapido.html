<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Passo-a-Passo Rápido | ⎙ L o M ⎙</title>
    <meta name="description" content="[ Leia o Manual ]">
    
    
    <link rel="preload" href="/assets/css/0.styles.ea343242.css" as="style"><link rel="preload" href="/assets/js/app.0ab0ca1c.js" as="script"><link rel="preload" href="/assets/js/2.213fb269.js" as="script"><link rel="preload" href="/assets/js/15.66e3efdb.js" as="script"><link rel="prefetch" href="/assets/js/10.18334337.js"><link rel="prefetch" href="/assets/js/11.15cfa334.js"><link rel="prefetch" href="/assets/js/12.e30c7281.js"><link rel="prefetch" href="/assets/js/13.e596a1d7.js"><link rel="prefetch" href="/assets/js/14.8b3c6043.js"><link rel="prefetch" href="/assets/js/16.f882e1fe.js"><link rel="prefetch" href="/assets/js/17.5f095422.js"><link rel="prefetch" href="/assets/js/18.ac18e36f.js"><link rel="prefetch" href="/assets/js/19.18caca3a.js"><link rel="prefetch" href="/assets/js/20.40093ffb.js"><link rel="prefetch" href="/assets/js/21.e9503ba0.js"><link rel="prefetch" href="/assets/js/22.ea0e0c9a.js"><link rel="prefetch" href="/assets/js/23.d5915556.js"><link rel="prefetch" href="/assets/js/24.43950e47.js"><link rel="prefetch" href="/assets/js/25.7b887e0a.js"><link rel="prefetch" href="/assets/js/26.78888944.js"><link rel="prefetch" href="/assets/js/27.3445bd37.js"><link rel="prefetch" href="/assets/js/28.e040bb03.js"><link rel="prefetch" href="/assets/js/29.3e17311d.js"><link rel="prefetch" href="/assets/js/3.14fcc7bd.js"><link rel="prefetch" href="/assets/js/30.cb768095.js"><link rel="prefetch" href="/assets/js/31.26174ea9.js"><link rel="prefetch" href="/assets/js/32.619e6176.js"><link rel="prefetch" href="/assets/js/33.641da4a6.js"><link rel="prefetch" href="/assets/js/34.d095d102.js"><link rel="prefetch" href="/assets/js/35.9fc12126.js"><link rel="prefetch" href="/assets/js/36.c554f0f7.js"><link rel="prefetch" href="/assets/js/37.40aebf76.js"><link rel="prefetch" href="/assets/js/4.be19ec57.js"><link rel="prefetch" href="/assets/js/5.a81a2a3d.js"><link rel="prefetch" href="/assets/js/6.9ba7221f.js"><link rel="prefetch" href="/assets/js/7.5adf214a.js"><link rel="prefetch" href="/assets/js/8.d4cc09a8.js"><link rel="prefetch" href="/assets/js/9.14450833.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ea343242.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">⎙ L o M ⎙</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">[Inicio]</a></div><div class="nav-item"><a href="/oracle/" class="nav-link">[Oracle]</a></div><div class="nav-item"><a href="/docker/" class="nav-link router-link-active">[Docker]</a></div><div class="nav-item"><a href="/sas/" class="nav-link">[SAS]</a></div><div class="nav-item"><a href="/freeplane.html" class="nav-link">Mapas (ツ)</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">[Inicio]</a></div><div class="nav-item"><a href="/oracle/" class="nav-link">[Oracle]</a></div><div class="nav-item"><a href="/docker/" class="nav-link router-link-active">[Docker]</a></div><div class="nav-item"><a href="/sas/" class="nav-link">[SAS]</a></div><div class="nav-item"><a href="/freeplane.html" class="nav-link">Mapas (ツ)</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Container com Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docker/" class="sidebar-link">Introdução</a></li><li><a href="/docker/passo_rapido.html" class="active sidebar-link">Passo-a-Passo Rápido</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#passo-a-passo-rapido" class="sidebar-link">Passo-a-Passo Rápido</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#obtendo-informacoes-sobre-o-docker" class="sidebar-link">Obtendo informações sobre o  Docker</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#baixando-uma-imagem-no-docker" class="sidebar-link">Baixando uma imagem no Docker</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#verificando-as-imagens-disponiveis-em-seu-repositorio" class="sidebar-link">Verificando as imagens disponíveis em seu repositório</a></li></ul></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#rodando-o-primeiro-container" class="sidebar-link">Rodando o primeiro container</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#verificando-o-container-criado" class="sidebar-link">Verificando o container criado</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#status-de-um-container" class="sidebar-link">Status de um Container</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#nomeando-um-container" class="sidebar-link">Nomeando um Container</a></li></ul></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#nomeando-um-container-2" class="sidebar-link">Nomeando um Container</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#trabalhando-interativamente-com-o-container" class="sidebar-link">Trabalhando interativamente com o container</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#attach-and-dettach" class="sidebar-link">Attach and Dettach</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#a-docker-layer" class="sidebar-link">A Docker layer</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#a-docker-container" class="sidebar-link">A Docker container</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#docker-registry" class="sidebar-link">Docker Registry</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#docker-repository" class="sidebar-link">Docker Repository</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#searching-docker-images" class="sidebar-link">Searching Docker images</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#pssubcommander" class="sidebar-link">PSsubcommander</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#tracking-changes-inside-containers" class="sidebar-link">Tracking changes inside containers</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#controlling-docker-containers" class="sidebar-link">Controlling Docker containers</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#housekeeping-containers" class="sidebar-link">Housekeeping containers</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#building-images-from-containers" class="sidebar-link">Building images from containers</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="passo-a-passo-rapido"><a href="#passo-a-passo-rapido" aria-hidden="true" class="header-anchor">#</a> Passo-a-Passo Rápido</h2> <p>Caso não tenha trabalhando anteriormente com o Docker, comece por esta sessão! Os passos descritos, aqui, tem algumas dicas contidas no livro <a href="https://www.packtpub.com/networking-and-servers/learning-docker-second-edition" target="_blank" rel="noopener noreferrer">Learning Docker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> e diversas outras fontes da WEB.</p> <h3 id="obtendo-informacoes-sobre-o-docker"><a href="#obtendo-informacoes-sobre-o-docker" aria-hidden="true" class="header-anchor">#</a> Obtendo informações sobre o  Docker</h3> <p>Antes de iniciar, verifique como está o ambiente Docker com o comando:</p> <p><code>$sudo docker info</code></p> <pre><code>[marcos@localhost mozilla_marcos0]$ sudo docker info
Containers: 8
 Running: 1
 Paused: 0
 Stopped: 7
Images: 12
Server Version: 18.09.9
...
</code></pre> <h3 id="baixando-uma-imagem-no-docker"><a href="#baixando-uma-imagem-no-docker" aria-hidden="true" class="header-anchor">#</a> Baixando uma imagem no Docker</h3> <p>Depois do docker instalado (links na <a href="/docker/" class="router-link-active">página inicial</a>, comece baixando uma imagem. O comando para tal é:</p> <p><code>$sudo docker pull nome-imagem</code></p> <p>Vamos criar um container a partir de uma imagem de uma distribuição Linux sem qualquer aplicação específica associada. Para baixar digite:</p> <p><code>$sudo docker pull busybox</code> ou</p> <p><code>$sudo docker pull alpine</code></p> <pre><code>[docker_usr@localhost ~]$ docker pull busybox
Using default tag: latest
latest: Pulling from library/busybox
7c9d20b9b6cd: Pull complete 
Digest: sha256:fe301db49df08c384001ed752dff6d52b4305a73a7f608f21528048e8a08b51e
Status: Downloaded newer image for busybox:latest
</code></pre> <div class="tip custom-block"><ul><li>A imagem <a href="https://hub.docker.com/_/busybox" target="_blank" rel="noopener noreferrer">BusyBox<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> é conhecida como canivete suíço, pois com um tamanho entre 1 e 5 Mb é excelente para criar distribuições com economia de espaço, além de possuir utilitários muito pequenos que substituem os tradicionais.</li> <li>Outra imagem ótima é a <a href="https://wiki.alpinelinux.org/wiki/Main_Page" target="_blank" rel="noopener noreferrer">Alpine<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, uma distribuição construída com _(musl libc)[https://www.musl-libc.org/] e BusyBox.Ela é muito pequena e otimizada para ser executada na RAM pois utiliza no máximo 8MB. Também pode ser um bom controlador para vários contêineres de docker com RAM suficiente.</li> <li>Para baixar aplicações completas o processo é o mesmo. No <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> imagens para a maioria dos bancos de dados como postgres, redis, mysql, mongo, etc.</li></ul></div> <h3 id="verificando-as-imagens-disponiveis-em-seu-repositorio"><a href="#verificando-as-imagens-disponiveis-em-seu-repositorio" aria-hidden="true" class="header-anchor">#</a> Verificando as imagens disponíveis em seu repositório</h3> <p><code>$sudo docker images</code></p> <pre><code>[docker_usr@localhost ~]$ sudo docker images
REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE
busybox               latest              19485c79a9bb        5 weeks ago         1.22MB
alpine                3.9                 cdf98d1859c1        6 months ago        5.53MB
</code></pre> <h2 id="rodando-o-primeiro-container"><a href="#rodando-o-primeiro-container" aria-hidden="true" class="header-anchor">#</a> Rodando o primeiro container</h2> <p><code>$sudo docker run busybox echo &quot;Leia o Manual!&quot;</code></p> <pre><code>[marcos@localhost ~]$ $sudo docker run busybox echo &quot;Leia o Manual!&quot;
Leia o Manual!
</code></pre> <div class="tip custom-block"><ul><li>O comando <em>run</em> cria um novo container!</li></ul></div> <h2 id="verificando-o-container-criado"><a href="#verificando-o-container-criado" aria-hidden="true" class="header-anchor">#</a> Verificando o container criado</h2> <p>O container criado após a execução do comando  <em>run</em> pode ser visto através do comando <em>container ls -a</em></p> <p><code>$sudo docker container ls -a</code></p> <pre><code>marcos@localhost mozilla_marcos0]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                      PORTS                    NAMES
f2c66d7ce322        busybox               &quot;echo 'Leia o Manual…&quot;   10 minutes ago      Exited (0) 10 minutes ago                            kind_stonebraker
</code></pre> <p>A saída acima, mostra que o container foi criado, inicializado, executou sua tarefa e foi encerrado. O status <em>&quot;Exited&quot;</em> permite essa conclusão. O valor entre parenteses, nesse caso o 0 (zero), informa que o processo foi concluído sem erros.</p> <h3 id="status-de-um-container"><a href="#status-de-um-container" aria-hidden="true" class="header-anchor">#</a> Status de um Container</h3> <p>Além de <em>&quot;Exited&quot;</em>, os containeres podem estar em seu ambiente com qualquer uma das seguintes situações:</p> <h3 id="nomeando-um-container"><a href="#nomeando-um-container" aria-hidden="true" class="header-anchor">#</a> Nomeando um Container</h3> <p>Ao criar um container o docker associa ao mesmo um nome e uma UUID (código identificador unico) de maneira a identificá-lo. No exemplo anterior, o Docker, aleatóriamente nomeou o container de &quot;kind_stonebraker&quot; e atribuiu o UUID f2c66d7ce322. Para um gerenciamento adequado será preciso atribuir nomes mais significativos.</p> <h2 id="nomeando-um-container-2"><a href="#nomeando-um-container-2" aria-hidden="true" class="header-anchor">#</a> Nomeando um Container</h2> <p>Para atribuir un nome a um container, utilizar o parâmetro  <code>--name=nome-container</code></p> <p><code>$sudo docker run --name=diga_lom busybox echo &quot;Leia o Manual!&quot;</code></p> <pre><code>[marcos@localhost ~]$ sudo docker run --name=diga_lom busybox echo &quot;Leia o Manual!&quot;
Leia o Manual!
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                      PORTS                    NAMES
118e04914d8e        busybox               &quot;echo 'Leia o Manual…&quot;   12 seconds ago      Exited (0) 11 seconds ago                            diga_lom
</code></pre> <h2 id="trabalhando-interativamente-com-o-container"><a href="#trabalhando-interativamente-com-o-container" aria-hidden="true" class="header-anchor">#</a> Trabalhando interativamente com o container</h2> <p>Ao trabalhar com dados, em várias situações é necessário trabalhar na linha de comando do container que está em execução. O subcomando <em>run</em> possui is parâmetros  <em>-t</em> e <em>-i</em> que inicializam o container de forma interativa</p> <p><code>$sudo docker run -i-t alpine /bin/ash</code></p> <pre><code>[marcos@localhost mozilla_marcos0]$ sudo docker run -it alpine /bin/ash
/ # 
</code></pre> <ul><li>O parâmetro <em>i</em> é o responsável pela inicialização interativa, capturando a entrada padrão (STDIN) do container.</li> <li>O parâmetro <em>-t</em> aloca um emulador de terminal e o atribui ao container.</li></ul> <p><code>$sudo docker run -i-t ubuntu:14.04 /bin/bash</code></p> <p><code>$sudo docker run -i-t alpine /bin/ash</code></p> <p><code>$sudo docker run --hostname marcos_host--namemarcos_vm-i-t ubuntu:14.04 /bin/bash</code></p> <h1 id="parei-aqui"><a href="#parei-aqui" aria-hidden="true" class="header-anchor">#</a> [PAREI AQUI]</h1> <h2 id="attach-and-dettach"><a href="#attach-and-dettach" aria-hidden="true" class="header-anchor">#</a> Attach and Dettach</h2> <p>Now, let's use one of the niche features of Docker for detaching it from the interactive container and then look at the details that Docker manages for this container. Yes, we can detach it from our container by using the Ctrl + P and Ctrl + Qescape sequence. This escape sequence will detach the TTY from the container and land us in the Docker host prompt $ , however the container will continue to run.</p> <p>$ sudo docker run --hostname marcos_host  --namemarcos_vm</p> <h2 id="troubleshooting"><a href="#troubleshooting" aria-hidden="true" class="header-anchor">#</a> Troubleshooting</h2> <p>Most of the time, you will not encounter any issues when installing Docker. However, unplanned failures might occur. Therefore, it is necessary to discuss prominent troubleshooting techniques and tips. Let's begin by discussing the troubleshooting knowhow in this section. The first tip is that the running status of Docker should be checked by using the following command:</p> <p><code>$sudo service docker status</code></p> <h2 id="a-docker-layer"><a href="#a-docker-layer" aria-hidden="true" class="header-anchor">#</a> A Docker layer</h2> <p>A Docker layer could represent either read-only images or read-write images. However, the top layer of a container stack is always the read-write (writable) layer, which hosts a Docker container.</p> <h2 id="a-docker-container"><a href="#a-docker-container" aria-hidden="true" class="header-anchor">#</a> A Docker container</h2> <p>From the preceding diagram, it is clear that the read-write layer is the container layer. There could be several read-only images beneath the container layer. Typically, a container originates from a read-only image through the act of a commit . When you start a container, you actually refer to an image through its unique ID . Docker pulls the required image and its parent image. It continues to pull all the parent images until it reaches the base image.</p> <h2 id="docker-registry"><a href="#docker-registry" aria-hidden="true" class="header-anchor">#</a> Docker Registry</h2> <p>A Docker Registry is a place where the Docker images can be stored in order to be publicly found, accessed, and used by the worldwide developers for quickly crafting fresh and composite applications without any risks. Because all the stored images would have gone through multiple validations, verifications, and refinements, the quality of those images will be really high. Using the Docker push command, you can dispatch your Docker image to the Registry so that it is registered and deposited.
As a clarification, the registry is for registering the Docker images, whereas the repository is for storing those registered Docker images in a publicly discoverable and centralized place. A Docker image is stored within a Repository in the Docker Registry. Each Repository is unique for each user or account.</p> <h2 id="docker-repository"><a href="#docker-repository" aria-hidden="true" class="header-anchor">#</a> Docker Repository</h2> <p>A Docker Repository is a namespace that is used for storing a Docker image. For instance, if your app is namedhelloworldand your username or namespace for the Registry isthedockerbookthen, in the Docker Repository, where this image would be stored in the Docker Registry would be namedthedockerbook/helloworld.
The base images are stored in the Docker Repository. The base images are the fountainheads for realizing the bigger and better images with the help of a careful addition of new modules. The child images are the ones that have their own parent images. The base image does not have any parent image. The images sitting on a base image are named as parent images because the parent images bear the child images.</p> <h2 id="searching-docker-images"><a href="#searching-docker-images" aria-hidden="true" class="header-anchor">#</a> Searching Docker images</h2> <p>The Docker Hub repository typically hosts both the official images as well as the images that have been contributed by the third-party Docker enthusiasts. You can search for the Docker images in the Docker Hub Registry by using the docker search subcommand, as shown in this example:</p> <p><code>$sudo docker searchmysql</code></p> <h2 id="pssubcommander"><a href="#pssubcommander" aria-hidden="true" class="header-anchor">#</a> PSsubcommander</h2> <p>The dockerpssubcommand will list all the running containers and their important properties, as shown here:</p> <p><code>$sudo dockerps</code></p> <h2 id="tracking-changes-inside-containers"><a href="#tracking-changes-inside-containers" aria-hidden="true" class="header-anchor">#</a> Tracking changes inside containers</h2> <p>The Docker engine elegantly manages its filesystem and it allows us to inspect a container filesystem by using the docker diff subcommand. In order to inspect the container filesystem, we can either detach it from the container or use another terminal of our Docker host and then issue the docker diffsubcommand.</p> <p><code>$sudo docker diff d5ad60f174d3</code></p> <p>In the given example, the docker diff subcommand will generate four lines, shown here:
C /home
A /home/abc
A /home/cde
A /home/fgh</p> <p>The preceding output indicates that the /home directory has been modified, which has been denoted by C, and the /home/abc, /home/cdeand the /home/fghfiles have been added, and these are denoted by A . In addition, D denotes deletion. Since we have not deleted any files, it is not in our sample output.</p> <h2 id="controlling-docker-containers"><a href="#controlling-docker-containers" aria-hidden="true" class="header-anchor">#</a> Controlling Docker containers</h2> <p>Now, let's launch our container and experiment with the docker stop subcommand, as shown here:</p> <p><code>$sudo docker run -i-t ubuntu:14.04 /bin/bash</code></p> <p>root@da1c0f7daa2a:/#  <a href="mailto:root@da1c0f7daa2a">mailto:root@da1c0f7daa2a</a>
Having launched the container, let's run the docker stop subcommand on this container by using the container ID that was taken from the prompt.
Let's start the previously stopped container by using the docker start subcommand, as follows:</p> <p><code>$sudo docker start da1c0f7daa2a</code></p> <p>The restartcommand is a combination of the stop and the start functionality.
In other words, the restart command will stop a running container by following the precise steps followed by the docker stop subcommand and then it will initiate the start process. This functionality will be executed by default through the docker restart subcommand.
The next important set of container-controlling subcommands are docker pauseand dockerunpause. The docker pause subcommands will essentially freeze the execution of all the processes within that container. Conversely, the dockerunpausesubcommand will unfreeze the execution of all the processes within that container and resume the execution from the point where it was frozen.</p> <p><code>$sudo docker run -i-t ubuntu:14.04 /bin/bash</code></p> <p><code>$sudo docker pause c439077aa80a</code></p> <p><code>$sudo dockerunpausec439077aa80a</code></p> <h2 id="housekeeping-containers"><a href="#housekeeping-containers" aria-hidden="true" class="header-anchor">#</a> Housekeeping containers</h2> <p>In many of the previous examples, when we issued dockerps-awe saw the many stopped containers. These containers could continue to stay in the stopped status for ages, if we chose not to intervene. At the outset, it may look like a glitch, but in reality, we can perform operations, such as committing an image from a container, restarting the stopped container, and so on. However, not all the stopped containers will be reused, and each of these unused containers will take up the disk space in the filesystem of the Docker host. The Docker engine provides a couple of ways to alleviate this issue. Let's start exploring them.</p> <p>Two docker subcommands, that is, dockerrmand dockerps, could be combined to automatically delete all the containers that are not currently running, as shown in the following command:</p> <p><code>$sudo docker rm$(sudodockerps-aq)</code></p> <p>In the preceding command, the command inside the back quotes will produce a list of the full container IDs of every container, running or otherwise, which will become the argument for the dockerrmsubcommand. Unless forced with the -f option to do otherwise, the dockerrmsubcommand will only remove the container that is not in the running state.</p> <h2 id="building-images-from-containers"><a href="#building-images-from-containers" aria-hidden="true" class="header-anchor">#</a> Building images from containers</h2> <p>Let's take ubuntu:14.04 as our base image, install thewgetapplication, and then convert the running container to an image by performing the following steps:</p> <ol><li><pre><code>Launch an ubuntu:14.04 container by using the docker run subcommand, shown here: 
</code></pre></li></ol> <p><code>$sudo docker run -i-t ubuntu:14.04 /bin/bash</code></p> <ol start="2"><li><pre><code>Having launched the container, let's quickly verify ifwgetis available for our image or not. We have used the which command withwgetas an argument for this purpose and, in our case, it returns empty, which essentially means that it could not find anywgetinstallation in this container. This command is run as follows: 
</code></pre></li></ol> <p>root@472c96295678:/# whichwget  <a href="mailto:root@472c96295678">mailto:root@472c96295678</a>
root@472c96295678:/#  <a href="mailto:root@472c96295678">mailto:root@472c96295678</a></p> <ol start="3"><li><pre><code>Now let's move on to the next step which involves thewgetinstallation. Since it is a brand new ubuntu container, before installingwget, we must synchronize with the ubuntu package repository, as shown here: 
</code></pre></li></ol> <p>root@472c96295678:/# apt-get update  <a href="mailto:root@472c96295678">mailto:root@472c96295678</a></p> <ol start="4"><li><pre><code>Once the ubuntu package repository synchronization is over, we can proceed toward installingwget, as shown here: 
</code></pre></li></ol> <p>root@472c96295678:/# apt-get install -ywget  <a href="mailto:root@472c96295678">mailto:root@472c96295678</a></p> <ol start="5"><li><pre><code>Having completed thewgetinstallation, let's confirm our installation ofwget 
</code></pre></li></ol> <p>by invoking the which command withwgetas an argument, as shown here:
root@472c96295678:/#whichwget  <a href="mailto:root@472c96295678">mailto:root@472c96295678</a>
/usr/bin/wget
root@472c96295678:/#  <a href="mailto:root@472c96295678">mailto:root@472c96295678</a></p> <ol start="6"><li><pre><code>Installation of any software would alter the base image composition, which we can also trace by using the docker diff subcommand introduced in Tracking changes inside containers section of this chapter. From a second terminal or screen, we can issue the docker diff subcommand, as follows: 
</code></pre></li></ol> <p><code>$sudo docker diff 472c96295678</code></p> <p>The preceding command would show a few hundred lines of modification to the ubuntu image. This modification includes the update on package repository,wgetbinary, and the support files forwget.</p> <ol start="7"><li><pre><code>Finally, let's move to the most important step of committing the image. The Docker commit subcommand can be performed on a running or a stopped container. When commit is performed on a running container, the Docker engine will pause the container during the commit operation in order to avoid any data inconsistency. We strongly recommend performing the commit operation on a stopped container. We can commit a container to an image by the docker commit subcommand, as shown here: 
</code></pre></li></ol> <p><code>$sudo docker commit 472c96295678 \learningdocker/ubuntu_wget</code></p> <p>A530f0a0238654fa741813fac39bba2cc14457aee079a7ae1fe1c64dc7e1ac25
We have committed our image by using the namelearningdocker/ubuntu_wget. Step by step, we saw how to create an image from a container. Now, let's quickly list the images of our Docker host and see if this newly created image is a part of the image list by using the following command:</p> <p><code>$sudo docker images</code></p> <p>REPOSITORY                                       TAG             IMAGE  ID              CREATED                      VIRTUAL SIZE
learningdocker/ubuntu_wget   latest   a530f0a02386    48 seconds ago                221.3 MB</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docker/" class="prev router-link-active">Introdução</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0ab0ca1c.js" defer></script><script src="/assets/js/2.213fb269.js" defer></script><script src="/assets/js/15.66e3efdb.js" defer></script>
  </body>
</html>
