<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Passo-a-Passo Rápido | ⎙ L o M ⎙</title>
    <meta name="description" content="[ Leia o Manual ]">
    
    
    <link rel="preload" href="/assets/css/0.styles.ea343242.css" as="style"><link rel="preload" href="/assets/js/app.8a18fa49.js" as="script"><link rel="preload" href="/assets/js/2.213fb269.js" as="script"><link rel="preload" href="/assets/js/15.7edcef62.js" as="script"><link rel="prefetch" href="/assets/js/10.b10b11d8.js"><link rel="prefetch" href="/assets/js/11.b6de0e85.js"><link rel="prefetch" href="/assets/js/12.e30c7281.js"><link rel="prefetch" href="/assets/js/13.6258d4fe.js"><link rel="prefetch" href="/assets/js/14.c5e6c05e.js"><link rel="prefetch" href="/assets/js/16.5c7a18f4.js"><link rel="prefetch" href="/assets/js/17.a25fbf04.js"><link rel="prefetch" href="/assets/js/18.b8eb3b3f.js"><link rel="prefetch" href="/assets/js/19.e6cd522d.js"><link rel="prefetch" href="/assets/js/20.06ca7e07.js"><link rel="prefetch" href="/assets/js/21.fa2e6cce.js"><link rel="prefetch" href="/assets/js/22.4d160c28.js"><link rel="prefetch" href="/assets/js/23.4e1b847e.js"><link rel="prefetch" href="/assets/js/24.209ef015.js"><link rel="prefetch" href="/assets/js/25.50107d5e.js"><link rel="prefetch" href="/assets/js/26.a405fae2.js"><link rel="prefetch" href="/assets/js/27.1554be2a.js"><link rel="prefetch" href="/assets/js/28.252d9183.js"><link rel="prefetch" href="/assets/js/29.1dd870cf.js"><link rel="prefetch" href="/assets/js/3.4a741c3f.js"><link rel="prefetch" href="/assets/js/30.f7053e53.js"><link rel="prefetch" href="/assets/js/31.c5e3144f.js"><link rel="prefetch" href="/assets/js/32.244b359b.js"><link rel="prefetch" href="/assets/js/33.187a4d23.js"><link rel="prefetch" href="/assets/js/34.1a270214.js"><link rel="prefetch" href="/assets/js/35.086cf283.js"><link rel="prefetch" href="/assets/js/36.897d292f.js"><link rel="prefetch" href="/assets/js/37.4dd3476e.js"><link rel="prefetch" href="/assets/js/38.22c84c1e.js"><link rel="prefetch" href="/assets/js/4.11f3db62.js"><link rel="prefetch" href="/assets/js/5.cde53df1.js"><link rel="prefetch" href="/assets/js/6.9ba7221f.js"><link rel="prefetch" href="/assets/js/7.ef915e67.js"><link rel="prefetch" href="/assets/js/8.40676f4c.js"><link rel="prefetch" href="/assets/js/9.0e7a8289.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ea343242.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">⎙ L o M ⎙</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">[Inicio]</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">[Oracle]</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/oracle/" class="nav-link">Introdução</a></li><li class="dropdown-item"><!----> <a href="/oracle/dpump/" class="nav-link">Datapump</a></li><li class="dropdown-item"><!----> <a href="/oracle/dpump/dp_impdp.html" class="nav-link">impdp (Import) </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">[Docker]</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link router-link-active">Introdução</a></li><li class="dropdown-item"><!----> <a href="/docker/passo_rapido/" class="nav-link">Roteiro Básico</a></li><li class="dropdown-item"><!----> <a href="/docker/dockerfile/" class="nav-link">Dockerfile</a></li><li class="dropdown-item"><!----> <a href="/docker/volumes/" class="nav-link">Volumes</a></li></ul></div></div><div class="nav-item"><a href="/sas/" class="nav-link">[SAS]</a></div><div class="nav-item"><a href="/freeplane.html" class="nav-link">Mapas (ツ)</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">[Inicio]</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">[Oracle]</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/oracle/" class="nav-link">Introdução</a></li><li class="dropdown-item"><!----> <a href="/oracle/dpump/" class="nav-link">Datapump</a></li><li class="dropdown-item"><!----> <a href="/oracle/dpump/dp_impdp.html" class="nav-link">impdp (Import) </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">[Docker]</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link router-link-active">Introdução</a></li><li class="dropdown-item"><!----> <a href="/docker/passo_rapido/" class="nav-link">Roteiro Básico</a></li><li class="dropdown-item"><!----> <a href="/docker/dockerfile/" class="nav-link">Dockerfile</a></li><li class="dropdown-item"><!----> <a href="/docker/volumes/" class="nav-link">Volumes</a></li></ul></div></div><div class="nav-item"><a href="/sas/" class="nav-link">[SAS]</a></div><div class="nav-item"><a href="/freeplane.html" class="nav-link">Mapas (ツ)</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Container com Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docker/" class="sidebar-link">Introdução</a></li><li><a href="/docker/passo_rapido.html" class="active sidebar-link">Passo-a-Passo Rápido</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#passo-a-passo-rapido" class="sidebar-link">Passo-a-Passo Rápido</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#obtendo-informacoes-sobre-o-docker" class="sidebar-link">Obtendo informações sobre o  Docker</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#baixando-uma-imagem-no-docker" class="sidebar-link">Baixando uma imagem no Docker</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#verificando-as-imagens-disponiveis-em-seu-repositorio" class="sidebar-link">Verificando as imagens disponíveis em seu repositório</a></li></ul></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#comandos-basicos-para-conteiners" class="sidebar-link">Comandos básicos para Contêiners</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#criando-conteiner-com-create" class="sidebar-link">Criando contêiner com CREATE</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#rodando-o-primeiro-conteiner" class="sidebar-link">Rodando o primeiro contêiner</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#verificando-o-conteiner-criado" class="sidebar-link">Verificando o contêiner criado</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#status-de-um-conteiner" class="sidebar-link">Status de um Contêiner</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#nomeando-um-conteiner" class="sidebar-link">Nomeando um Contêiner</a></li></ul></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#nomeando-um-conteiner-2" class="sidebar-link">Nomeando um Contêiner</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#trabalhando-interativamente-com-o-conteiner" class="sidebar-link">Trabalhando interativamente com o contêiner</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#desconectando-de-um-conteiner-em-execucao" class="sidebar-link">Desconectando de um contêiner em execução</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#conectando-a-um-conteiner-em-execucao" class="sidebar-link">Conectando a um contêiner em execução</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#parando-a-um-conteiner-em-execucao" class="sidebar-link">Parando a um contêiner em execução</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#excluindo-a-um-conteiner" class="sidebar-link">Excluindo a um contêiner</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#controlando-a-execucao-de-um-conteiner" class="sidebar-link">Controlando a execução de um contêiner</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#conteiner-executando-em-background" class="sidebar-link">Contêiner executando em &quot;background&quot;</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#pausando-um-conteiner" class="sidebar-link">Pausando um contêiner</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#restaura-um-conteiner-pausado" class="sidebar-link">Restaura um contêiner &quot;pausado&quot;</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#reinicializando-um-conteiner" class="sidebar-link">Reinicializando um contêiner</a></li></ul></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#criando-uma-imagem-a-partir-do-conteiner" class="sidebar-link">Criando uma imagem a partir do Contêiner</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#observacoes" class="sidebar-link">Observações</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#conteiners-devem-ser-descartaveis" class="sidebar-link">Contêiners devem ser descartáveis</a></li><li class="sidebar-sub-header"><a href="/docker/passo_rapido.html#trabalhando-com-dockfile" class="sidebar-link">Trabalhando com Dockfile</a></li></ul></li></ul></li><li><a href="/docker/dockerfile.html" class="sidebar-link">Usando Dockfiles</a></li><li><a href="/docker/volumes.html" class="sidebar-link">Usando Volumes</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="passo-a-passo-rapido"><a href="#passo-a-passo-rapido" aria-hidden="true" class="header-anchor">#</a> Passo-a-Passo Rápido</h2> <p>Caso não tenha trabalhando anteriormente com o Docker, comece por esta sessão! Os passos descritos, aqui, tem algumas dicas contidas no livro <a href="https://www.packtpub.com/networking-and-servers/learning-docker-second-edition" target="_blank" rel="noopener noreferrer">Learning Docker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> e diversas outras fontes da WEB.</p> <h3 id="obtendo-informacoes-sobre-o-docker"><a href="#obtendo-informacoes-sobre-o-docker" aria-hidden="true" class="header-anchor">#</a> Obtendo informações sobre o  Docker</h3> <p>Antes de iniciar, verifique como está o ambiente Docker com o comando:</p> <p><code>sudo docker info</code></p> <pre><code>[marcos@localhost mozilla_marcos0]$ sudo docker info
Containers: 8
 Running: 1
 Paused: 0
 Stopped: 7
Images: 12
Server Version: 18.09.9
...
</code></pre> <h3 id="baixando-uma-imagem-no-docker"><a href="#baixando-uma-imagem-no-docker" aria-hidden="true" class="header-anchor">#</a> Baixando uma imagem no Docker</h3> <p>Depois do docker instalado (links na <a href="/docker/" class="router-link-active">página inicial</a>, comece baixando uma imagem. O comando para tal é:</p> <p><code>sudo docker pull nome-imagem</code></p> <p>Vamos criar um contêiner a partir de uma imagem de uma distribuição Linux sem qualquer aplicação específica associada. Para baixar digite:</p> <p><code>sudo docker pull busybox</code> ou</p> <p><code>sudo docker pull alpine</code></p> <pre><code>[docker_usr@localhost ~]$ docker pull busybox
Using default tag: latest
latest: Pulling from library/busybox
7c9d20b9b6cd: Pull complete 
Digest: sha256:fe301db49df08c384001ed752dff6d52b4305a73a7f608f21528048e8a08b51e
Status: Downloaded newer image for busybox:latest
</code></pre> <div class="tip custom-block"><ul><li>A imagem <a href="https://hub.docker.com/_/busybox" target="_blank" rel="noopener noreferrer">BusyBox<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> é conhecida como canivete suíço, pois com um tamanho entre 1 e 5 Mb é excelente para criar distribuições com economia de espaço, além de possuir utilitários muito pequenos que substituem os tradicionais.</li> <li>Outra imagem ótima é a <a href="https://wiki.alpinelinux.org/wiki/Main_Page" target="_blank" rel="noopener noreferrer">Alpine<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, uma distribuição construída com _(musl libc)[https://www.musl-libc.org/] e BusyBox.Ela é muito pequena e otimizada para ser executada na RAM pois utiliza no máximo 8MB. Também pode ser um bom controlador para vários contêineres de docker com RAM suficiente.</li> <li>Para baixar aplicações completas o processo é o mesmo. No <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> imagens para a maioria dos bancos de dados como postgres, redis, mysql, mongo, etc.</li></ul></div> <h3 id="verificando-as-imagens-disponiveis-em-seu-repositorio"><a href="#verificando-as-imagens-disponiveis-em-seu-repositorio" aria-hidden="true" class="header-anchor">#</a> Verificando as imagens disponíveis em seu repositório</h3> <p><code>sudo docker images</code></p> <pre><code>[docker_usr@localhost ~]$ sudo docker images
REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE
busybox               latest              19485c79a9bb        5 weeks ago         1.22MB
alpine                3.9                 cdf98d1859c1        6 months ago        5.53MB
</code></pre> <h2 id="comandos-basicos-para-conteiners"><a href="#comandos-basicos-para-conteiners" aria-hidden="true" class="header-anchor">#</a> Comandos básicos para Contêiners</h2> <p>Uma vez baixada a imagem desejada, pode-se começar a trabalhar com os contêiners, para tal é suficiente conhecer alguns poucos comandos. Certifique-se de que tenha instalado uma versão mais recente do Docker.</p> <table><thead><tr><th style="text-align:left;">Comando</th> <th style="text-align:left;">Descrição</th></tr></thead> <tbody><tr><td style="text-align:left;">create</td> <td style="text-align:left;">Cria um contêiner a partir de uma imagem</td></tr> <tr><td style="text-align:left;">inspect</td> <td style="text-align:left;">Lista as informações sobre um contêiner</td></tr> <tr><td style="text-align:left;">kill</td> <td style="text-align:left;">Pára instantaneamente o processo principam dentro do contêiner</td></tr> <tr><td style="text-align:left;">logs</td> <td style="text-align:left;">Imprimi os logs</td></tr> <tr><td style="text-align:left;">ls</td> <td style="text-align:left;">Lista os contêiners que estão em execução</td></tr> <tr><td style="text-align:left;">rm</td> <td style="text-align:left;">Apaga um contêiner com parado</td></tr> <tr><td style="text-align:left;">run</td> <td style="text-align:left;">Cria um contêiner e o inicializa</td></tr> <tr><td style="text-align:left;">start</td> <td style="text-align:left;">Inicializa um containder criado/parado anteriormente</td></tr> <tr><td style="text-align:left;">stop</td> <td style="text-align:left;">Pára a execução de um contêiner, finalizando a execução dos processos</td></tr></tbody></table> <p>Os comandos acima são utilizados com a sintaxe:</p> <p><code>docker container nome-comando</code></p> <h2 id="criando-conteiner-com-create"><a href="#criando-conteiner-com-create" aria-hidden="true" class="header-anchor">#</a> Criando contêiner com CREATE</h2> <p>São varias as formas de se criar um contêiner à partir de uma imagem. Uma das formas mais simples é criar um contêiner com o comando <em>create</em>:</p> <p><code>sudo docker container create alpine /bin/ash</code></p> <pre><code>[marcos@localhost ~]$ sudo docker container create alpine /bin/ash
941b12c14898360536aebcde99a7fdcd669880667f033978599b1f9f3b61c383
[marcos@localhost ~]$ 
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                       PORTS                    NAMES
941b12c14898        alpine                &quot;/bin/ash&quot;               9 seconds ago       Created                                               romantic_kalam
[marcos@localhost ~]$
</code></pre> <h2 id="rodando-o-primeiro-conteiner"><a href="#rodando-o-primeiro-conteiner" aria-hidden="true" class="header-anchor">#</a> Rodando o primeiro contêiner</h2> <p>Outra maneira comum de criar um contêiner é através do comando <em>run</em>:</p> <p><code>sudo docker run busybox echo &quot;Leia o Manual!&quot;</code></p> <pre><code>[marcos@localhost ~]$ $sudo docker run busybox echo &quot;Leia o Manual!&quot;
Leia o Manual!
</code></pre> <h2 id="verificando-o-conteiner-criado"><a href="#verificando-o-conteiner-criado" aria-hidden="true" class="header-anchor">#</a> Verificando o contêiner criado</h2> <p>O contêiner criado após a execução do comando  <em>run</em> pode ser visto através do comando <em>container ls -a</em></p> <p><code>sudo docker container ls -a</code></p> <pre><code>marcos@localhost mozilla_marcos0]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                      PORTS                    NAMES
941b12c14898        alpine                &quot;/bin/ash&quot;               9 minutes ago       Created                                               romantic_kalam
f2c66d7ce322        busybox               &quot;echo 'Leia o Manual…&quot;   10 seconds ago      Exited (0) 10 minutes ago                            kind_stonebraker
</code></pre> <p>A saída acima, mostra que o contêiner <em>kind_stonebraker</em> foi criado, inicializado, executou sua tarefa e foi encerrado. O status <em>&quot;Exited&quot;</em> permite essa conclusão. O valor entre parenteses, nesse caso o 0 (zero), informa que o processo foi concluído sem erros.</p> <h3 id="status-de-um-conteiner"><a href="#status-de-um-conteiner" aria-hidden="true" class="header-anchor">#</a> Status de um Contêiner</h3> <p>Além de <em>&quot;Exited&quot;</em>, os contêineres podem estar em seu ambiente com qualquer uma das seguintes situações:</p> <table><thead><tr><th style="text-align:left;">Status</th> <th style="text-align:left;">Descrição</th></tr></thead> <tbody><tr><td style="text-align:left;">Created</td> <td style="text-align:left;">O contêiner foi criado, mas não foi inicializado</td></tr> <tr><td style="text-align:left;">Restarting</td> <td style="text-align:left;">O contêiner que está em processo de inicialização</td></tr> <tr><td style="text-align:left;">Running</td> <td style="text-align:left;">O contêiner está em execução no momento da verificação do status</td></tr> <tr><td style="text-align:left;">Paused</td> <td style="text-align:left;">O contêiner está pausado</td></tr> <tr><td style="text-align:left;">Exited</td> <td style="text-align:left;">O contêiner que foi processado e concluiu sua atividade.</td></tr> <tr><td style="text-align:left;">Dead</td> <td style="text-align:left;">O contêiner que o &quot;daemon&quot; tentou parar mas não conseguiu. Ocorre em momentos de uso intenso de recursos</td></tr></tbody></table> <h3 id="nomeando-um-conteiner"><a href="#nomeando-um-conteiner" aria-hidden="true" class="header-anchor">#</a> Nomeando um Contêiner</h3> <p>Ao criar um contêiner o docker associa ao mesmo um nome e uma UUID (código identificador unico) de maneira a identificá-lo. No exemplo anterior, o Docker, aleatóriamente nomeou o contêiner de &quot;kind_stonebraker&quot; e atribuiu o UUID f2c66d7ce322. Para um gerenciamento adequado será preciso atribuir nomes mais significativos.</p> <h2 id="nomeando-um-conteiner-2"><a href="#nomeando-um-conteiner-2" aria-hidden="true" class="header-anchor">#</a> Nomeando um Contêiner</h2> <p>Para atribuir un nome a um contêiner, utilizar o parâmetro  <code>--name=nome-container</code></p> <p><code>sudo docker run --name=diga_lom busybox echo &quot;Leia o Manual!&quot;</code></p> <pre><code>[marcos@localhost ~]$ sudo docker run --name=diga_lom busybox echo &quot;Leia o Manual!&quot;
Leia o Manual!
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                      PORTS                    NAMES
118e04914d8e        busybox               &quot;echo 'Leia o Manual…&quot;   12 seconds ago      Exited (0) 11 seconds ago                            diga_lom
</code></pre> <h2 id="trabalhando-interativamente-com-o-conteiner"><a href="#trabalhando-interativamente-com-o-conteiner" aria-hidden="true" class="header-anchor">#</a> Trabalhando interativamente com o contêiner</h2> <p>Ao trabalhar com dados, em várias situações é necessário trabalhar na linha de comando do contêiner que está em execução. O subcomando <em>run</em> possui is parâmetros  <em>t</em> e <em>i</em> que inicializam o contêiner de forma interativa</p> <p><code>sudo docker run --name=alpine_sandbox -it alpine /bin/ash</code></p> <pre><code>[marcos@localhost mozilla_marcos0]$ sudo docker run  --name=alpine_sandbox -it alpine /bin/ash
/ # 
</code></pre> <ul><li>O parâmetro <em>i</em> é o responsável pela inicialização interativa, capturando a entrada padrão (STDIN) do contêiner.</li> <li>O parâmetro <em>-t</em> aloca um emulador de terminal e o atribui ao contêiner.</li></ul> <div class="tip custom-block"><p>Usaremos o contêiner criado <em>alpine_sandbox</em> nos exemplos seguintes. Lembre-de de Trocar pelo nome do seu contêiner!</p></div> <h2 id="desconectando-de-um-conteiner-em-execucao"><a href="#desconectando-de-um-conteiner-em-execucao" aria-hidden="true" class="header-anchor">#</a> Desconectando de um contêiner em execução</h2> <p>Em diversos momentos, trabalhando interativamente em um contêiner, se faz necessário desconectar do mesmo para fazer uma outra atividade no sistema operacional da máquina host, retornando em seguida. Para desconectar de um contêiner basta teclar a sequencia de comandos &quot;Ctrl P&quot; e &quot;Ctrl Q&quot;.</p> <p>Desconectando com &quot;Ctrl P&quot; e &quot;Ctrl Q&quot;:</p> <p><code>sudo docker run --name=alpine_sandbox -it alpine /bin/ash</code></p> <pre><code>[marcos@localhost ~]$ sudo docker run  --name=alpine_sandbox -it alpine /bin/ash
/ # ls
bin    dev    etc    home   lib    media  mnt    opt    proc   root   run    sbin   srv    sys    tmp    usr    var
/ # [marcos@localhost ~]$ 
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                      PORTS                    NAMES
229e10a256d5        alpine                &quot;/bin/ash&quot;               23 seconds ago      Up 21 seconds                                        alpine_sandbox
[marcos@localhost ~]$ 
</code></pre> <h2 id="conectando-a-um-conteiner-em-execucao"><a href="#conectando-a-um-conteiner-em-execucao" aria-hidden="true" class="header-anchor">#</a> Conectando a um contêiner em execução</h2> <p>Para retornar ao contêiner que está em execução usa-se o subcomando <em>attach</em></p> <p><code>sudo docker attach alpine_sandbox</code></p> <pre><code>[marcos@localhost ~]$ sudo docker attach alpine_sandbox
/ # ls
bin    dev    etc    home   lib    media  mnt    opt    proc   root   run    sbin   srv    sys    tmp    usr    var
/ # 
</code></pre> <h2 id="parando-a-um-conteiner-em-execucao"><a href="#parando-a-um-conteiner-em-execucao" aria-hidden="true" class="header-anchor">#</a> Parando a um contêiner em execução</h2> <p>Para interromper um contêiner que está em execução usa-se o subcomando <em>stop</em></p> <p><code>sudo docker container stop alpine_sandbox</code></p> <pre><code>[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                      PORTS                    NAMES
8d24146968be        alpine                &quot;/bin/ash&quot;               14 seconds ago      Up 12 seconds                                        alpine_sandbox

[marcos@localhost ~]$ sudo docker container stop alpine_sandbox
alpine_sandbox

[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                       PORTS                    NAMES
8d24146968be        alpine                &quot;/bin/ash&quot;               45 seconds ago      Exited (137) 6 seconds ago                            alpine_sandbox
</code></pre> <h2 id="excluindo-a-um-conteiner"><a href="#excluindo-a-um-conteiner" aria-hidden="true" class="header-anchor">#</a> Excluindo a um contêiner</h2> <p>Para excluir um contêiner o subcomando <em>rm</em>. O contêiner deve estar parado para que o comando seja executado com sucesso</p> <p><code>sudo docker container rm alpine_sandbox</code></p> <pre><code>[marcos@localhost ~]$ sudo docker container rm alpine_sandbox
alpine_sandbox
</code></pre> <h2 id="controlando-a-execucao-de-um-conteiner"><a href="#controlando-a-execucao-de-um-conteiner" aria-hidden="true" class="header-anchor">#</a> Controlando a execução de um contêiner</h2> <p>Além dos comandos apresentados anteriormente, existem alguns outros bastante úteis. mas para utilizá-los será nessária uma imagem que contenha, por exemplo, um servico em execução.</p> <p>Por exemplo, as imagens utilizadas até aqui são iniciadas com o processador de comandos <em>/bin/ash</em> ou <em>/bin/sh</em>. Ao inicializar estes contêineres e desconectar, o mesmo passa para o status <em>Exited</em>.</p> <p>Baixaremos um servidor <a href="https://hub.docker.com/r/tobilg/mini-webserver" target="_blank" rel="noopener noreferrer">web mínimo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> para os passos seguintes</p> <p><code>sudo docker pull tobilg/mini-webserver</code></p> <pre><code>[marcos@localhost ~]$ sudo docker pull tobilg/mini-webserver
Using default tag: latest
latest: Pulling from tobilg/mini-webserver
2aecc7e1714b: Pull complete 
e8bfe4fc6199: Pull complete 
b234f264abbe: Pull complete 
684e340e448a: Pull complete 
67f83b1979d1: Pull complete 
00c829ba9035: Pull complete 
Digest: sha256:773954565f17198c1f4e68a2684171d3dd8d3434b9ffefd082c2901b0d7c3bc5
Status: Downloaded newer image for tobilg/mini-webserver:latest
[marcos@localhost ~]$ sudo docker images
REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE
tobilg/mini-webserver   latest              cd885ea73da2        2 years ago         64.5MB
</code></pre> <h3 id="conteiner-executando-em-background"><a href="#conteiner-executando-em-background" aria-hidden="true" class="header-anchor">#</a> Contêiner executando em &quot;background&quot;</h3> <p>Em boa parte das aplicações deseja-se criar o contêiner e deixá-lo rodando em &quot;background&quot;. O parâmetro <em>-d</em> informa ao &quot;deamon&quot; que o contêiner será executado desta forma:</p> <p><code>sudo docker run -d nome_imagem</code></p> <p>sudo docker run --name=mini-web  -d tobilg/mini-webserver</p> <p>[marcos@localhost ~]$ sudo docker run --name=mini-web -d tobilg/mini-webserver
e202a158a4290ddb7911c87defcb67caa2f4ed9b89f9e5c03ebdf79e3046894f
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS                      PORTS                    NAMES
e202a158a429        tobilg/mini-webserver   &quot;node /app/mini-webs…&quot;   6 seconds ago       Up 5 seconds                3000/tcp                 mini-web</p> <div class="tip custom-block"><p>Por se tratar de um servidor WEB, são necessários parametros adicionais na inicializaçao. Para fins de exemplificação, estes parâmetos foram deixados de lado.☻</p></div> <h3 id="pausando-um-conteiner"><a href="#pausando-um-conteiner" aria-hidden="true" class="header-anchor">#</a> Pausando um contêiner</h3> <p>O comando <em>pause</em> interrompe a execução em um ou mais contêineres pausando todos os processos, mantendo-os integros.</p> <p><code>sudo docker pause mini-web</code></p> <pre><code>[marcos@localhost ~]$ sudo docker pause mini-web
mini-web
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS                      PORTS                    NAMES
e202a158a429        tobilg/mini-webserver   &quot;node /app/mini-webs…&quot;   6 minutes ago       Up 6 minutes (Paused)       3000/tcp                 mini-web
</code></pre> <h3 id="restaura-um-conteiner-pausado"><a href="#restaura-um-conteiner-pausado" aria-hidden="true" class="header-anchor">#</a> Restaura um contêiner &quot;pausado&quot;</h3> <p>O comando <em>unpause</em> restaura a execução em um ou mais contêineres pausados.</p> <p><code>sudo docker unpause mini-web</code></p> <pre><code>[marcos@localhost ~]$ sudo docker unpause mini-web
mini-web
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS                      PORTS                    NAMES
e202a158a429        tobilg/mini-webserver   &quot;node /app/mini-webs…&quot;   8 minutes ago       Up 8 minutes                3000/tcp                 mini-web
</code></pre> <h3 id="reinicializando-um-conteiner"><a href="#reinicializando-um-conteiner" aria-hidden="true" class="header-anchor">#</a> Reinicializando um contêiner</h3> <p>Com o comando <em>restart</em> - Reinicializa um ou mais contêineres.Este é uma combinação dos comandos <em>stop</em> e <em>start</em>.</p> <p><code>sudo docker restart mini-web</code></p> <pre><code>[marcos@localhost ~]$ sudo docker restart mini-web
mini-web
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS                      PORTS                    NAMES
e202a158a429        tobilg/mini-webserver   &quot;node /app/mini-webs…&quot;   12 minutes ago      Up 5 seconds                3000/tcp                 mini-web
</code></pre> <h2 id="criando-uma-imagem-a-partir-do-conteiner"><a href="#criando-uma-imagem-a-partir-do-conteiner" aria-hidden="true" class="header-anchor">#</a> Criando uma imagem a partir do Contêiner</h2> <p>Uma vez que as imagens são baixadas, os contêineres são criados e modificados para atender à demandas específicas como a criação de um ambiente de desenvolvimento, por exemplo. Para ser funcional este contêiner precisa ser adequadamente configurado, deve &quot;apontar&quot; para pastas locais na máquina hospedeira, de maneira que haja persistência de dados, terá diferentes programas instalados, bem como serviços configurados. Todo este esforço é preservado com a criação de uma nova imagem à partir do contêiner &quot;pronto para uso&quot;.</p> <p>Para criar uma imagem à partir de um contêiner que foi configurado, recebeu alterações, utilitários e programas, use o comando <em>commit</em>.</p> <p><code>sudo docker commit alpine_sandbox img_alpine_sandbox</code></p> <pre><code>[marcos@localhost ~]$ sudo docker commit alpine_sandbox  img_alpine_sandbox
sha256:414544c5b9bb8f429d5fbb9ae837a83654eee20c2722ace93a5f4d0e7d832532
[marcos@localhost ~]$ sudo docker images
REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE
img_alpine_sandbox      latest              414544c5b9bb        16 seconds ago      5.55MB
</code></pre> <h2 id="observacoes"><a href="#observacoes" aria-hidden="true" class="header-anchor">#</a> Observações</h2> <h3 id="conteiners-devem-ser-descartaveis"><a href="#conteiners-devem-ser-descartaveis" aria-hidden="true" class="header-anchor">#</a> Contêiners devem ser descartáveis</h3> <p>O contêiner deve ser descartável, sem que ocorra prejuízo à atividade que ele dá suporte. Ou seja, ao finalizar sua execução, o mesmo deve ser apagado, evitando o consumo de recursos desnecessariamente.</p> <p>Para criar um contêiner que será removido automaticamente após encerrado, utilize o argumento --rm.</p> <p><code>sudo docker run --rm --name=diga-lom busybox echo &quot;Leia o Manual!&quot;</code></p> <pre><code>[marcos@localhost ~]$ sudo docker run --rm --name=diga-lom busybox echo &quot;Leia o Manual!&quot;
Leia o Manual!
[marcos@localhost ~]$ sudo docker container ls -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                      PORTS                    NAMES
[marcos@localhost ~]$ 
</code></pre> <div class="warning custom-block"><p class="custom-block-title">Preservando os dados</p> <p>Todos os dados utilizados pelo contêiner serão EXCLUÍDOS também. Para preservar dados das aplicações ou dos trabalhos, os mesmos devem gravados  em pastas locais do &quot;host&quot; que deverão se mapeadas como volume durante a criação do contêiner. Consulte <a href="/docker/volumes.html">&quot;Usando volumes&quot;</a> para persistir os dados gerados em suas atividades.</p></div> <h3 id="trabalhando-com-dockfile"><a href="#trabalhando-com-dockfile" aria-hidden="true" class="header-anchor">#</a> Trabalhando com Dockfile</h3> <p>A criação do contêiner é somente o primeiro passo na construção de um ambiente de desenvolvimento, criação de um servidor para testes, uma aplicação ou mesmo um microserviço.</p> <p>Para que se tenha um contêiner pronto para o uso, invariavelmente, serão necessários passos adicionais tais como:</p> <ul><li>Atualizar as bibliotecas do SO, (apt-get update, etc..);</li> <li>Instalar as bibliotecas da aplicação o contêiner; e</li> <li>Aplicar configurações do ambiente como portas e volumes, entre outras atividades;</li></ul> <p>Para não ter que refazer todos estes passos todas as vezes que precisarmos de um contêiner, geramos uma imagem e a partir daí, basta criar os contêiners desejados.</p> <p>O uso de arquivos &quot;dockerfile&quot; é a melhor forma de gerenciar as imagens. Consulte <a href="/docker/dockerfile.html">&quot;Usando Dockfiles&quot;</a> para conhecer e começar a utilizar esse ótimo recurso.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docker/" class="prev router-link-active">Introdução</a></span> <span class="next"><a href="/docker/dockerfile.html">Usando Dockfiles</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8a18fa49.js" defer></script><script src="/assets/js/2.213fb269.js" defer></script><script src="/assets/js/15.7edcef62.js" defer></script>
  </body>
</html>
