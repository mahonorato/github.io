<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Usando Volumes | ⎙ L o M ⎙</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="[ Leia o Manual ]">
    
    <link rel="preload" href="/assets/css/0.styles.3c72cb3e.css" as="style"><link rel="preload" href="/assets/js/app.219f2bd1.js" as="script"><link rel="preload" href="/assets/js/2.e9ecf186.js" as="script"><link rel="preload" href="/assets/js/21.d81c25d9.js" as="script"><link rel="prefetch" href="/assets/js/10.34f64252.js"><link rel="prefetch" href="/assets/js/11.0e36d354.js"><link rel="prefetch" href="/assets/js/12.9c0d9e85.js"><link rel="prefetch" href="/assets/js/13.7737f02a.js"><link rel="prefetch" href="/assets/js/14.f9175365.js"><link rel="prefetch" href="/assets/js/15.e77660ab.js"><link rel="prefetch" href="/assets/js/16.c558e382.js"><link rel="prefetch" href="/assets/js/17.f1ecdd58.js"><link rel="prefetch" href="/assets/js/18.13d9b0df.js"><link rel="prefetch" href="/assets/js/19.1c84d28a.js"><link rel="prefetch" href="/assets/js/20.abb287aa.js"><link rel="prefetch" href="/assets/js/22.d6c006ac.js"><link rel="prefetch" href="/assets/js/23.13bf14b0.js"><link rel="prefetch" href="/assets/js/24.fbe05d98.js"><link rel="prefetch" href="/assets/js/25.a7875a56.js"><link rel="prefetch" href="/assets/js/26.fe68683f.js"><link rel="prefetch" href="/assets/js/27.be8189ff.js"><link rel="prefetch" href="/assets/js/28.f4ce8a2f.js"><link rel="prefetch" href="/assets/js/29.7a07a87f.js"><link rel="prefetch" href="/assets/js/3.7b6c6ac8.js"><link rel="prefetch" href="/assets/js/30.4d5efe72.js"><link rel="prefetch" href="/assets/js/31.141634c1.js"><link rel="prefetch" href="/assets/js/32.2bfbb319.js"><link rel="prefetch" href="/assets/js/33.d22e53aa.js"><link rel="prefetch" href="/assets/js/34.bec6cd65.js"><link rel="prefetch" href="/assets/js/35.8a804cef.js"><link rel="prefetch" href="/assets/js/36.0a103b15.js"><link rel="prefetch" href="/assets/js/37.827450ca.js"><link rel="prefetch" href="/assets/js/38.97c011ae.js"><link rel="prefetch" href="/assets/js/39.7489ab70.js"><link rel="prefetch" href="/assets/js/4.070dd0f9.js"><link rel="prefetch" href="/assets/js/40.5a9a38cb.js"><link rel="prefetch" href="/assets/js/41.8b9dc97a.js"><link rel="prefetch" href="/assets/js/42.a438a970.js"><link rel="prefetch" href="/assets/js/43.fdc0a90e.js"><link rel="prefetch" href="/assets/js/44.248672af.js"><link rel="prefetch" href="/assets/js/45.649eaee9.js"><link rel="prefetch" href="/assets/js/46.b9a3f341.js"><link rel="prefetch" href="/assets/js/47.b82aefca.js"><link rel="prefetch" href="/assets/js/48.e57d83ca.js"><link rel="prefetch" href="/assets/js/49.3bd938d6.js"><link rel="prefetch" href="/assets/js/5.b906b695.js"><link rel="prefetch" href="/assets/js/50.4a6b0de1.js"><link rel="prefetch" href="/assets/js/51.f3fda26f.js"><link rel="prefetch" href="/assets/js/52.8bf24035.js"><link rel="prefetch" href="/assets/js/53.e9310ddb.js"><link rel="prefetch" href="/assets/js/54.65621525.js"><link rel="prefetch" href="/assets/js/55.a16c46ca.js"><link rel="prefetch" href="/assets/js/6.f0e74fe4.js"><link rel="prefetch" href="/assets/js/7.62b0251b.js"><link rel="prefetch" href="/assets/js/8.5e5e56c4.js"><link rel="prefetch" href="/assets/js/9.24bb852e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3c72cb3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">⎙ L o M ⎙</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  [Inicio]
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[Banco de Dados]" class="dropdown-title"><span class="title">[Banco de Dados]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[Banco de Dados]" class="mobile-dropdown-title"><span class="title">[Banco de Dados]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/oracle/" class="nav-link">
  Oracle
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[DevOps]" class="dropdown-title"><span class="title">[DevOps]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[DevOps]" class="mobile-dropdown-title"><span class="title">[DevOps]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link router-link-active">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[Ciencia de Dados]" class="dropdown-title"><span class="title">[Ciencia de Dados]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[Ciencia de Dados]" class="mobile-dropdown-title"><span class="title">[Ciencia de Dados]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sas/" class="nav-link">
  SAS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[Desenvolvimento]" class="dropdown-title"><span class="title">[Desenvolvimento]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[Desenvolvimento]" class="mobile-dropdown-title"><span class="title">[Desenvolvimento]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[Utils &amp; Apps]" class="dropdown-title"><span class="title">[Utils &amp; Apps]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[Utils &amp; Apps]" class="mobile-dropdown-title"><span class="title">[Utils &amp; Apps]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/util/IDE/" class="nav-link">
  IDE
</a></li></ul></div></div><div class="nav-item"><a href="/freeplane.html" class="nav-link">
  Mapas (ツ)
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  [Inicio]
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[Banco de Dados]" class="dropdown-title"><span class="title">[Banco de Dados]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[Banco de Dados]" class="mobile-dropdown-title"><span class="title">[Banco de Dados]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/oracle/" class="nav-link">
  Oracle
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[DevOps]" class="dropdown-title"><span class="title">[DevOps]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[DevOps]" class="mobile-dropdown-title"><span class="title">[DevOps]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link router-link-active">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[Ciencia de Dados]" class="dropdown-title"><span class="title">[Ciencia de Dados]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[Ciencia de Dados]" class="mobile-dropdown-title"><span class="title">[Ciencia de Dados]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sas/" class="nav-link">
  SAS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[Desenvolvimento]" class="dropdown-title"><span class="title">[Desenvolvimento]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[Desenvolvimento]" class="mobile-dropdown-title"><span class="title">[Desenvolvimento]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="[Utils &amp; Apps]" class="dropdown-title"><span class="title">[Utils &amp; Apps]</span> <span class="arrow down"></span></button> <button type="button" aria-label="[Utils &amp; Apps]" class="mobile-dropdown-title"><span class="title">[Utils &amp; Apps]</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/util/IDE/" class="nav-link">
  IDE
</a></li></ul></div></div><div class="nav-item"><a href="/freeplane.html" class="nav-link">
  Mapas (ツ)
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Container com Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docker/" aria-current="page" class="sidebar-link">Introdução</a></li><li><a href="/docker/passo_rapido.html" class="sidebar-link">Passo-a-Passo Rápido</a></li><li><a href="/docker/dockerfile.html" class="sidebar-link">Usando Dockfiles</a></li><li><a href="/docker/volumes.html" aria-current="page" class="active sidebar-link">Usando Volumes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/volumes.html#usando-volumes" class="sidebar-link">Usando Volumes</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#conectando-uma-pasta-ao-iniciar-o-container" class="sidebar-link">Conectando uma pasta ao iniciar o container</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#objeto-volume" class="sidebar-link">Objeto Volume</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#o-comando-volume" class="sidebar-link">O comando VOLUME</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/volumes.html#criando-um-volume" class="sidebar-link">Criando um volume</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#inspecionando-o-volume-criado" class="sidebar-link">Inspecionando o volume criado</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#listando-os-volume-de-um-host" class="sidebar-link">Listando os volume de um host</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#removendo-volumes" class="sidebar-link">Removendo volumes</a></li></ul></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#volumes-anexados" class="sidebar-link">Volumes Anexados</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/volumes.html#anexando-um-volume" class="sidebar-link">Anexando um volume</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#compartilhando-arquivos-entre-conteineres" class="sidebar-link">Compartilhando arquivos entre contêineres</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#copiando-arquivos-do-hospedeiro-para-o-volume" class="sidebar-link">Copiando arquivos do hospedeiro para o volume</a></li></ul></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#verificando-o-ponto-de-montagem-do-volume-criado" class="sidebar-link">Verificando o ponto de montagem do volume criado</a></li><li class="sidebar-sub-header"><a href="/docker/volumes.html#criando-link-simbolico-para-o-ponto-de-montagem" class="sidebar-link">Criando Link simbólico para o Ponto de Montagem</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="usando-volumes"><a href="#usando-volumes" class="header-anchor">#</a> Usando Volumes</h2> <p>O container possui seu próprio sistemas de pastas para organização dos arquivos. Estas pastas, no entanto, não são visíveis para a máquina hospedeira (host). E o pior: quando o container é extinto, os dados que estavam nestas pastas se perdem também. A maneira de preservar os dados é adicionar pastas externas ao container, mapeando-as como se fossem nativas. E para tal usamos os <strong>volumes</strong>.</p> <p>Os volumes são versáteis e adiciona novas possibilidades ao ambiente criado por um container:</p> <ul><li>Ao excluirmos o container, o volume permanece inalterado, preservando os dados, arquivos de parametros, etc.;</li> <li>É possível compartilhar um mesmo volume entre containêres, deixando os dados visíveis para ambos;</li> <li>Um volume pode estar localizado em uma outra máquina, na rede local ou em nuvem;</li> <li>Um volume pode ser acoplado e desacplado ao container.</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Para situações mais imediatas é possível conectar uma pasta local em um container com o comando <em>-v</em> ou com <em>--mount type=bind</em></p></div> <h2 id="conectando-uma-pasta-ao-iniciar-o-container"><a href="#conectando-uma-pasta-ao-iniciar-o-container" class="header-anchor">#</a> Conectando uma pasta ao iniciar o container</h2> <p>Para ligar um volume basta usar o parametro <em>v</em> e informar a localização da pasta no servidor, separar por <em>:</em> e informar a pasta no container. As pastas serão criadas, caso não existam e substituídas, caso já exista no container</p> <div class="language- extra-class"><pre><code>sudo docker run -v /pasta/pasta_hospedeiro:/pasta_container --name=nome-container -it nome_imagem [comando_container]
</code></pre></div><p>Ou para ficar mais legível:</p> <div class="language- extra-class"><pre><code>sudo docker run -v /pasta/pasta_hospedeiro:/pasta_container \
                 --name=nome-container \
                 -it nome_imagem [comando_container]
</code></pre></div><p>Exemplo:</p> <div class="language- extra-class"><pre><code>sudo docker run -v /tmp/pasta_hospedeiro:/pasta_container  \
                 --name=alpine_sandbox-06 \
                 -it alpine /bin/ash


[marcos@localhost ~]$ sudo docker run -v /tmp/pasta_hospedeiro:/pasta_container  \
&gt;                  --name=alpine_sandbox-06 \
&gt;                  -it alpine /bin/ash
/ # ls
bin  etc   lib     mnt  pasta_container  root  sbin  sys  usr
dev  home  media   opt  proc             run   srv   tmp  var
/ # ls -ld /pasta_container
drwxr-xr-x    2 root     root            40 Nov 15 10:11 /pasta_container
</code></pre></div><p>Verificando em outro terminal:</p> <div class="language- extra-class"><pre><code>[marcos@localhost ~]$ ls /tmp
dropbox-antifreeze-ngXrsG  ssh-BJo2lg5gQv5v  pasta_hospedeiro   systemd-private-2d4a70
</code></pre></div><p>A partir da versão 17.06 o Docker começou a utilizar o parâmeto <em>--mount</em> que é mais descritivo. E esta sintaxe deve ser adotada. Assim, o comando:</p> <div class="language- extra-class"><pre><code>sudo docker run -v /pasta/pasta_hospedeiro:/pasta_container \
                 --name=nome-container \
                 -it nome_imagem [comando_container]
</code></pre></div><p>Deverá ser substituído por:</p> <div class="language- extra-class"><pre><code>sudo docker run --mount type=bind,source=/pasta/pasta_hospedeiro,target=/pasta_container \
                --name=nome-container \
                -it nome_imagem [comando_container]
</code></pre></div><p>Exemplo:</p> <div class="language- extra-class"><pre><code>sudo docker run --mount type=bind,source=/home/marcos/docker.images/bind/,target=/pasta_container \
                --name=alpine_sandbox-07 \
                -it alpine /bin/ash
</code></pre></div><p>(executando o container)</p> <div class="language- extra-class"><pre><code>marcos@localhost ~]$ sudo docker run --mount type=bind,source=/home/marcos/docker.images/bind/,target=/pasta_container \
&gt;                 --name=alpine_sandbox-07 \
&gt;                 -it alpine /bin/ash
/ # ls /pasta_container/
freeplane-icon.png  freeplane_logo.jpg
/ #
</code></pre></div><p>(verificando na pasta local)</p> <div class="language- extra-class"><pre><code>[marcos@localhost ~]$ ls /home/marcos/docker.images/bind/
freeplane-icon.png  freeplane_logo.jpg
[marcos@localhost ~]$ 
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>A ligação de pastas locais ao container, torna-o menos portátil, visto que implica na existencia da mesma estrutura de arquivos na máquina host.</p></div> <h2 id="objeto-volume"><a href="#objeto-volume" class="header-anchor">#</a> Objeto Volume</h2> <p>O volume pode ser criado com o compartilhamento de pastas durante a inicialização de um container com a chamada a <em>RUN</em> ou mesmo com o comando VOLUME em um dockerfile. Mas também, pode ser criado sem que esteja associado a qualquer container.</p> <h2 id="o-comando-volume"><a href="#o-comando-volume" class="header-anchor">#</a> O comando VOLUME</h2> <p>Para gerenciar a criação de volumes existe o comando <em>volume</em> com os seguintes parâmetros:</p> <table><thead><tr><th style="text-align:left;">Comando</th> <th style="text-align:left;">Descrição</th></tr></thead> <tbody><tr><td style="text-align:left;">create</td> <td style="text-align:left;">Cria um volume</td></tr> <tr><td style="text-align:left;">inspect</td> <td style="text-align:left;">Lista informações sobre um ou mais volumes</td></tr> <tr><td style="text-align:left;">ls</td> <td style="text-align:left;">Lista os volumes criados</td></tr> <tr><td style="text-align:left;">prune</td> <td style="text-align:left;">Remove todos os volumes locais não utilizados</td></tr> <tr><td style="text-align:left;">rm</td> <td style="text-align:left;">Remove um ou mais volumes</td></tr></tbody></table> <h3 id="criando-um-volume"><a href="#criando-um-volume" class="header-anchor">#</a> Criando um volume</h3> <p>Para criar um volume chamado docker01.vol:</p> <p><code>sudo docker volume create nome_volume</code></p> <p>Exemplo:</p> <p><code>sudo docker volume create docker01.vol</code></p> <div class="language- extra-class"><pre><code>[marcos@localhost ~]$ sudo docker volume create docker01.vol
docker01.vol
</code></pre></div><h3 id="inspecionando-o-volume-criado"><a href="#inspecionando-o-volume-criado" class="header-anchor">#</a> Inspecionando o volume criado</h3> <p>Para ler as iformações referentes ao volume chamado docker01.vol:</p> <p><code>sudo docker volume inspect docker01.vol</code></p> <div class="language- extra-class"><pre><code>[marcos@localhost ~]$ sudo docker volume inspect docker01.vol
[
    {
        &quot;CreatedAt&quot;: &quot;2019-11-15T11:02:09-02:00&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: {},
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/docker01.vol/_data&quot;,
        &quot;Name&quot;: &quot;docker01.vol&quot;,
        &quot;Options&quot;: {},
        &quot;Scope&quot;: &quot;local&quot;
    }
]
</code></pre></div><h3 id="listando-os-volume-de-um-host"><a href="#listando-os-volume-de-um-host" class="header-anchor">#</a> Listando os volume de um host</h3> <p>Para listar os volumes existentes no servidor:</p> <p><code>sudo docker volume ls</code></p> <div class="language- extra-class"><pre><code>[marcos@localhost ~]$ sudo docker volume ls
DRIVER              VOLUME NAME
local               226d88056414e07c663082f2cae3010cdb86a635a8fe84e513d645efa49a67b8
local               798f57d1a9f44a6b4c5193921c87a181663c140bad761d2fc8339c0d6dcb1b31
local               docker01.vol
local               dados_oper.vol
</code></pre></div><h3 id="removendo-volumes"><a href="#removendo-volumes" class="header-anchor">#</a> Removendo volumes</h3> <p>Use o parametro <em>prune</em> para remover todos os volumes que não estão em uso:</p> <p><code>sudo docker volume prune</code></p> <div class="language- extra-class"><pre><code>[marcos@localhost ~]$ sudo docker volume prune
WARNING! This will remove all local volumes not used by at least one container.
Are you sure you want to continue? [y/N] y
Deleted Volumes:
docker.vol
dados_oper.vol

Total reclaimed space: 0B
[marcos@localhost ~]$ 
</code></pre></div><p>Ou use <em>rm</em> para remover nominalmente um ou mais volumes:</p> <p><code>sudo docker volume rm docker02.vol</code></p> <h2 id="volumes-anexados"><a href="#volumes-anexados" class="header-anchor">#</a> Volumes Anexados</h2> <h3 id="anexando-um-volume"><a href="#anexando-um-volume" class="header-anchor">#</a> Anexando um volume</h3> <p>Ao criar um container é possível anexar um volume existente:</p> <p><code>sudo docker container create --name=nome-container -it --mount source=nome-volume,target=/nome-pasta-container nome-imagem</code></p> <p><code>sudo docker container create --name=volume-sandbox -it --mount source=docker02.vol,target=/meu_volume alpine</code></p> <div class="language- extra-class"><pre><code>marcos@localhost ~]$ sudo docker volume create docker03.vol
docker03.vol
[marcos@localhost ~]$ sudo docker container create --name=volume-sandbox -it --mount source=docker03.vol,target=/meu_volume  alpine /bin/ash
e247e0d455f0459a10eb9c3045a6e52ad75468097e2e8b6a96e0c6f8d4d29f39
</code></pre></div><p>Inspecionando o container para verficar o volume anexado:</p> <div class="language- extra-class"><pre><code>marcos@localhost ~]$ docker container inspect volume-sandbox
        ... (linhas retiradas)
        &quot;Mounts&quot;: [
            {
                &quot;Type&quot;: &quot;volume&quot;,
                &quot;Name&quot;: &quot;docker03.vol&quot;,
                &quot;Source&quot;: &quot;/var/lib/docker/volumes/docker03.vol/_data&quot;,
                &quot;Destination&quot;: &quot;/meu_volume&quot;,
                &quot;Driver&quot;: &quot;local&quot;,
                &quot;Mode&quot;: &quot;z&quot;,
                &quot;RW&quot;: true,
                &quot;Propagation&quot;: &quot;&quot;
            }
        ...    
</code></pre></div><h3 id="compartilhando-arquivos-entre-conteineres"><a href="#compartilhando-arquivos-entre-conteineres" class="header-anchor">#</a> Compartilhando arquivos entre contêineres</h3> <p>Para testar o compartilhamento, serão usados dois contêineres (volume-sandbox-01, volume-sandbox-02) e um volume (docker04.vol):</p> <ul><li>Criando o volume, os contêineres e iniciando-os:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>	sudo docker volume create docker04.vol
	sudo docker container create --name=volume-sandbox-01 -it \
		--mount source=docker04.vol,target=/meu_volume  alpine
	sudo docker container create --name=volume-sandbox-02 -it \
		--mount source=docker04.vol,target=/meu_volume  alpine
	sudo docker container start volume-sandbox-01
	sudo docker container start volume-sandbox-02
</code></pre></div><ul><li>Conectando ao primeiro container. Criando um arquivo texto <em>leiame.txt</em>:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>	[marcos@localhost ~]$ sudo docker exec -it volume-sandbox-01 /bin/ash
	/ # ls
	bin         dev         etc         home        lib         media       meu_volume  mnt         opt         proc        root        run         sbin        srv         sys         tmp         usr         var
	/ # cd meu_volume/
	/meu_volume # echo &quot;Fui criado a partir de volume-sandbox-01&quot; &gt; leiame.txt
	/meu_volume # ls
	leiame.txt
</code></pre></div><ul><li>Conectando ao segundo container. Verificando a existência do <em>leiame.txt</em> na pasta meu_volume:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>	[marcos@localhost ~]$ sudo docker exec -it volume-sandbox-02 /bin/ash
	/ # ls
	bin         dev         etc         home        lib         media       meu_volume  mnt         opt         proc        root        run         sbin        srv         sys         tmp         usr         var
	/ # cat meu_volume/leiame.txt 
	Fui criado a partir de volume-sandbox-01
</code></pre></div><h3 id="copiando-arquivos-do-hospedeiro-para-o-volume"><a href="#copiando-arquivos-do-hospedeiro-para-o-volume" class="header-anchor">#</a> Copiando arquivos do hospedeiro para o volume</h3> <p>Copiando o arquivo <em>arquivo-do-host.txt</em> do hospdeiro para a pasta <em>meu_volume</em> no container <em>volume-sandbox-01</em>:</p> <div class="language- extra-class"><pre><code>`sudo docker container cp arquivo-do-host.txt volume-sandbox-01:/meu_volume`
</code></pre></div><h2 id="verificando-o-ponto-de-montagem-do-volume-criado"><a href="#verificando-o-ponto-de-montagem-do-volume-criado" class="header-anchor">#</a> Verificando o ponto de montagem do volume criado</h2> <p><code>sudo docker volume inspect docker04.vol</code></p> <div class="language- extra-class"><pre><code>[marcos@localhost ~]$ sudo docker volume inspect docker04.vol
[
    {
        &quot;CreatedAt&quot;: &quot;2019-11-15T12:36:13-02:00&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: {},
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/docker04.vol/_data&quot;,
        &quot;Name&quot;: &quot;docker04.vol&quot;,
        &quot;Options&quot;: {},
        &quot;Scope&quot;: &quot;local&quot;
    }
]
[marcos@localhost ~]$ sudo ls /var/lib/docker/volumes/docker04.vol/_data
arquivo-do-host.txt  leiame.txt
</code></pre></div><p>Os arquivos <em>arquivo-do-host.txt</em> e <em>leiame.txt</em> estão na pasta _/var/lib/docker/volumes/docker04.vol/<em>data</em></p> <h2 id="criando-link-simbolico-para-o-ponto-de-montagem"><a href="#criando-link-simbolico-para-o-ponto-de-montagem" class="header-anchor">#</a> Criando Link simbólico para o Ponto de Montagem</h2> <p>O docker possui plugins para permitir que o ponto de montagem seja alterado. Podem ser usados links simbólicos para tornar o acesso aos pontos de montagem mais simples.</p> <ul><li>Crie uma pasta para receber os links para seus volumes</li></ul> <p><code>sudo mkdir home/marcos/docker.images/volume/</code></p> <ul><li>Crie dentro da mesma, uma pasta com o nome do volume desejado</li></ul> <p><code>sudo mkdir /home/marcos/docker.images/volume/docker04.vol</code> <code>sudo mkdir /home/marcos/docker.images/volume/docker04.vol/dados</code></p> <div class="custom-block warning"><p class="custom-block-title">Fique Atento</p> <p>Se já existem arquivos no volume, copie-os para a pasta criada e remova-os do destino!</p></div> <ul><li>Crie o link simbólico</li></ul> <p><code>sudo ln -s /home/marcos/docker.images/volume/docker04.vol /var/lib/docker/volumes/docker04.vol/_data</code></p> <p>sudo ln -s /home/marcos/docker.images/volume/docker04.vol/dados /var/lib/docker/volumes/docker04.vol/_data</p> <div class="language- extra-class"><pre><code>[marcos@localhost ~]$ sudo ln -s /home/marcos/docker.images/volume/docker04.vol/dados /var/lib/docker/volumes/docker04.vol/_data
[marcos@localhost ~]$ sudo docker exec -it volume-sandbox-01 /bin/ash
/ # ls meu_volume/
dados
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docker/dockerfile.html" class="prev">
        Usando Dockfiles
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.219f2bd1.js" defer></script><script src="/assets/js/2.e9ecf186.js" defer></script><script src="/assets/js/21.d81c25d9.js" defer></script>
  </body>
</html>
